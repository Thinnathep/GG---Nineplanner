/* =========================
   GG-NINEPLANNER — styles.css (v6.3)
   • การ์ด/ฟอร์มมองเห็นแน่นอน (มือถือ/แท็บเล็ต/เดสก์ท็อป)
   • Dark/Light ครบ, คอนทราสต์อ่านง่าย, โฟกัสชัด
   • รวมแพตช์ iPad (Safari/WebKit) แก้ช่องป้อนหาย
   ========================= */

/* -------- Reset เบา ๆ + พื้นฐาน -------- */
*,*::before,*::after{box-sizing:border-box}
html{-webkit-text-size-adjust:100%}
body{margin:0}
img,svg,video,canvas,iframe{display:block;max-width:100%}
button,input,select,textarea{font:inherit;color:inherit}
@media (prefers-reduced-motion: reduce){
  *{animation-duration:.001ms !important;animation-iteration-count:1 !important;transition-duration:.001ms !important;scroll-behavior:auto !important}
}

/* -------- Design Tokens -------- */
:root{
  --brand-500:#0ea5e9;
  --brand-600:#0284c7;

  --txt:#0f172a;           /* slate-900 */
  --txt-muted:#64748b;     /* slate-500 */
  --bg:#f8fafc;            /* slate-50 */
  --bg-soft:rgba(255,255,255,.65);
  --bg-soft-2:rgba(255,255,255,.35);
  --border:rgba(203,213,225,.7);  /* slate-200 */
  --chip:rgba(148,163,184,.6);    /* slate-400 */

  --shadow:0 10px 30px rgba(2,6,23,.12);
  --focus:rgba(14,165,233,.7);
  --focus-ring:rgba(14,165,233,.12);
}
.dark{
  --txt:#e2e8f0;           /* slate-200 */
  --txt-muted:#94a3b8;     /* slate-400 */
  --bg:#0b1220;            /* near slate-950 */
  --bg-soft:rgba(2,6,23,.65);
  --bg-soft-2:rgba(2,6,23,.35);
  --border:rgba(30,41,59,.7);    /* slate-800 */
  --chip:rgba(51,65,85,.6);
  --focus:rgba(56,189,248,.8);
  --focus-ring:rgba(56,189,248,.14);
}

/* -------- พื้นหลัง/ตัวอักษร -------- */
body{
  background:var(--bg);
  color:var(--txt);
  font-family:"Noto Sans Thai","Inter","system-ui","-apple-system","Segoe UI","Roboto","sans-serif";
  line-height:1.6;
}

/* -------- Glass -------- */
.glass{
  backdrop-filter:blur(10px);
  background:linear-gradient(180deg,var(--bg-soft),var(--bg-soft-2));
}
.dark .glass,.glass-dark{
  backdrop-filter:blur(10px);
  background:linear-gradient(180deg,var(--bg-soft),var(--bg-soft-2));
}

/* -------- UI ชิ้นเล็ก -------- */
.tag{padding:.25rem .5rem;border-radius:9999px;border:1px solid var(--chip);font-size:.72rem}
.title{font-weight:800;font-size:1rem}
.subtitle{font-weight:800;font-size:.95rem}
.note{font-size:.85rem;color:var(--txt-muted)}
.chip{padding:.375rem .75rem;border-radius:9999px;border:1px solid var(--chip);font-size:.85rem;background:transparent}
.badge{font-size:.65rem;padding:.125rem .5rem;border-radius:9999px;background:rgba(15,23,42,.06);border:1px solid var(--chip)}
.cardtitle{font-weight:800;font-size:.95rem}
.carddesc{font-size:.85rem;color:var(--txt-muted)}

/* -------- ฟอร์ม -------- */
.lbl{display:flex;flex-direction:column;gap:.25rem;font-size:.9rem}
.ipt{
  padding:.6rem .8rem;border-radius:.8rem;border:1px solid var(--chip);
  background:#fff;color:var(--txt);width:100%;
}
.dark .ipt{background:#0b1220;border-color:var(--border);color:var(--txt)}
.ipt::placeholder{color:color-mix(in oklab, var(--txt-muted) 70%, transparent)}
input[aria-invalid="true"]{outline:2px solid #ef4444;outline-offset:0}
.ipt:focus{outline:2px solid var(--focus);outline-offset:2px;box-shadow:0 0 0 4px var(--focus-ring)}

/* -------- ปุ่ม -------- */
.btn{padding:.55rem 1rem;border-radius:.8rem;border:1px solid var(--chip);background:transparent;cursor:pointer}
.btn:hover{background:color-mix(in oklab, var(--bg) 80%, #fff)}
.btn-primary{padding:.6rem 1rem;border-radius:.8rem;background:var(--brand-600);color:#fff;box-shadow:var(--shadow);border:1px solid transparent;cursor:pointer}
.btn-primary:hover{background:var(--brand-500)}
.darkbtn{border-color:var(--chip);background:rgba(2,6,23,.6);color:#fff}

/* -------- การ์ด/บ็อกซ์ (โชว์แน่นอน) -------- */
.card{
  opacity:1;               /* ✅ สำคัญ: โชว์โดยค่าเริ่มต้น */
  transform:none;
  border-radius:1rem;
  padding:1rem;
  border:1px solid var(--border);
  background:linear-gradient(180deg,var(--bg-soft),var(--bg-soft-2));
  box-shadow:var(--shadow);
}
.card.detail{animation:fadeUp .35s ease forwards}
@keyframes fadeUp{from{opacity:0;transform:translateY(6px)}to{opacity:1;transform:translateY(0)}}

.box{
  border-radius:.9rem;border:1px solid var(--border);padding:1rem;
  background:color-mix(in oklab, #fff 45%, transparent);
}
.dark .box{background:color-mix(in oklab, #0b1220 45%, transparent)}

/* -------- รายการ/แถว -------- */
.ulist{font-size:.95rem;margin:0;padding:0;list-style:none}
.row{display:flex;justify-content:space-between;gap:1rem;padding:.6rem 0;border-top:1px solid var(--border)}
.sum{cursor:pointer;color:var(--brand-500);font-size:.9rem}
.hint{margin-top:.25rem;font-size:.8rem;color:var(--txt-muted)}
.disclaimer{font-size:.75rem;color:var(--txt-muted)}

/* -------- KPI -------- */
.kpi{padding:.75rem;border-radius:.8rem;background:#f8fafc;border:1px solid var(--border)}
.dark .kpi{background:#0b1220;border-color:var(--border)}
.kpil{color:var(--txt-muted);font-size:.8rem}
.kpin{font-weight:800;font-size:1.15rem}
.kpis{font-size:.72rem;color:var(--txt-muted)}

/* -------- แท่งสัดส่วน -------- */
.mixrow{display:flex;align-items:center;gap:.5rem}
.bar{flex:1;height:.55rem;border-radius:.55rem;background:#e2e8f0}
.dark .bar{background:#1f2937}
.barin{height:.55rem;border-radius:.55rem;background:var(--brand-500);width:0;transition:width .25s ease}

/* -------- Mobile Touch Targets -------- */
@media (max-width:640px){
  .btn,.btn-primary,.chip,.tag{padding:.65rem 1rem}
  .ipt{padding:.7rem .9rem}
  .title{font-size:1.05rem}
  .subtitle{font-size:1rem}
}

/* -------- Helpers -------- */
.hidden{display:none} /* กันกรณี CDN Tailwind โหลดช้าจน class ไม่ทำงาน */

/* =========================
   iPad / Tablet Safari Visibility Patch
   • ปิด backdrop-filter ที่ทำให้ input มองไม่เห็น
   • บังคับพื้นหลังการ์ด/บ็อกซ์ให้ทึบ + สีตัวอักษรชัด
   ========================= */
@supports (-webkit-touch-callout: none){
  .glass,.glass-dark{backdrop-filter:none !important}
  .card,.box{background:#ffffff !important}
  .dark .card,.dark .box{background:#0b1220 !important}

  header{position:sticky;z-index:30}
  .card,.box,#form{position:relative;z-index:1}

  .ipt{
    background:#ffffff !important;
    color:#0f172a !important;
    -webkit-text-fill-color:#0f172a !important; /* Safari */
    border-color:rgba(148,163,184,.7) !important;
  }
  .dark .ipt{
    background:#0f172a !important;
    color:#e2e8f0 !important;
    -webkit-text-fill-color:#e2e8f0 !important;
    border-color:rgba(51,65,85,.85) !important;
  }
  .ipt::placeholder{color:rgba(100,116,139,.9) !important;opacity:1 !important}
}

/* เงาเพิ่มเล็กน้อยบนแท็บเล็ตแนวตั้ง */
@media (min-width:768px){
  .card,.box{box-shadow:0 10px 30px rgba(2,6,23,.18)}
}

/* เผื่อธีม/ปลั๊กอินเบราว์เซอร์แต่งสีเอง */
input,select,textarea{background-clip:padding-box;-webkit-appearance:none}
